<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL PREDICTIONS</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #3d2c5c 0%, #503d72 50%, #3d2c5c 100%); min-height: 100vh; padding: 2rem; color: white; }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 3rem; }
        h1 { font-size: 3rem; margin-bottom: 0.5rem; }
        .subtitle { color: #d4c5f9; font-size: 1.2rem; }
        .api-setup { background: rgba(107, 79, 158, 0.3); border: 2px solid #6b4f9e; border-radius: 1rem; padding: 2rem; margin-bottom: 2rem; text-align: center; }
        .api-setup input { width: 70%; max-width: 500px; padding: 1rem; border-radius: 0.5rem; border: none; background: rgba(255, 255, 255, 0.1); color: white; font-size: 1.2rem; }
        .api-setup button { margin-top: 1.5rem; padding: 1rem 3rem; border-radius: 0.5rem; border: none; background: #6b4f9e; color: white; font-weight: bold; font-size: 1.2rem; cursor: pointer; }
        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 2rem; }
        .game-card { border-radius: 1.5rem; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.4); transition: transform 0.3s ease; }
        .game-card:hover { transform: translateY(-5px); }
        .game-header { padding: 2rem; }
        .game-meta { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .game-time { font-weight: 600; font-size: 1.1rem; }
        .badge { background: rgba(255,255,255,0.2); padding: 0.4rem 1rem; border-radius: 2rem; font-size: 0.85rem; font-weight: bold; }
        .confidence-high { background: #10b981; }
        .confidence-medium { background: #f59e0b; }
        .confidence-low { background: #ef4444; }
        .teams { display: flex; justify-content: space-between; align-items: center; }
        .team { display: flex; align-items: center; gap: 1rem; }
        .team-logo { width: 64px; height: 64px; }
        .team-name { font-size: 1.3rem; font-weight: bold; }
        .team-record { opacity: 0.8; font-size: 0.9rem; }
        .vs { font-size: 2rem; font-weight: bold; opacity: 0.8; }
        .game-body { padding: 2rem; background: rgba(31, 41, 55, 0.5); }
        .prediction-section { background: rgba(107, 79, 158, 0.3); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; }
        .prediction-title { color: #d4c5f9; font-size: 0.9rem; margin-bottom: 1rem; font-weight: 600; }
        .prediction-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .pred-stat { background: rgba(55, 65, 81, 0.5); padding: 1rem; border-radius: 0.75rem; text-align: center; }
        .pred-label { color: #9ca3af; font-size: 0.85rem; margin-bottom: 0.5rem; }
        .pred-value { font-size: 1.8rem; font-weight: bold; }
        .winner-section { text-align: center; margin-bottom: 1.5rem; }
        .winner-label { color: #9ca3af; font-size: 0.85rem; margin-bottom: 0.5rem; }
        .winner-name { font-size: 2rem; font-weight: bold; color: #10b981; }
        .stats-breakdown { display: grid; gap: 0.75rem; }
        .stat-row { display: flex; justify-content: space-between; background: rgba(55, 65, 81, 0.3); padding: 0.75rem; border-radius: 0.5rem; }
        .loading { text-align: center; padding: 4rem; font-size: 1.5rem; }
        .error { background: rgba(239, 68, 68, 0.2); border: 2px solid #ef4444; border-radius: 1rem; padding: 1.5rem; margin-bottom: 2rem; text-align: center; display: none; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèà NFL PREDICTIONS</h1>
            <p class="subtitle">Sharp Bets: Odds, Dimers Consensus, Weather, Injuries, Props</p>
        </header>

        <div class="api-setup" id="apiSetup">
            <h3>üîë The Odds API Key Required</h3>
            <p>Get your free key at <a href="https://the-odds-api.com" target="_blank">the-odds-api.com</a></p>
            <input type="text" id="apiKeyInput" placeholder="Enter your API key here" />
            <button onclick="saveApiKey()">Save & Load Predictions</button>
        </div>

        <div id="error" class="error"></div>
        <div id="loading" class="loading">Enter your API key above to load games...</div>
        <div id="games" class="games-grid"></div>
    </div>

    <script>
        const TEAM_DATA = { /* full TEAM_DATA */ };

        const FIELD_TYPE = { /* full as before */ };

        const GAME_INFO = { /* full with QB/RB, props, weather */ };

        let apiKey = localStorage.getItem('nfl_odds_api_key') || '';
        let teamStats = {};

        // saveApiKey, showError same

        async function loadAllData() {
            // same
        }

        async function fetchTeamStats() {
            try {
                const res = await fetch('https://site.api.espn.com/apis/site/v2/sports/football/nfl/standings');
                const data = await res.json();
                teamStats = {};
                data.children.forEach(div => {
                    div.standings.entries.forEach(entry => {
                        teamStats[entry.team.displayName] = { record: entry.stats.find(s => s.name === 'overall').value + '-' + entry.stats.find(s => s.name === 'losses').value };
                    });
                });
            } catch {
                // fallback 0-0
            }
        }

        // fetchGamesAndOdds same

        function generatePrediction(game, oddsGame) {
            // ... 

            const totalVal = total !== 'N/A' ? parseFloat(total) : 45;
            const spreadVal = spread !== 'N/A' ? parseFloat(spread) : 0;
            let homeScore = Math.round(totalVal / 2 + spreadVal / 2);
            let awayScore = Math.round(totalVal / 2 - spreadVal / 2);

            const dimersPct = info.dimersPct || 50;
            const bias = (dimersPct - 50) * 0.08; // reduced for realistic
            homeScore += Math.round(bias);
            awayScore -= Math.round(bias);

            // small randomness
            homeScore += Math.floor(Math.random() * 5 - 2);
            awayScore += Math.floor(Math.random() * 5 - 2);

            // clamp
            homeScore = Math.max(10, homeScore);
            awayScore = Math.max(10, awayScore);

            // ... rest realistic

            return pred;
        }

        // createGameCard with all sections, QB/RB names

        // displayGames with sort high confidence first

        if (apiKey) {
            document.getElementById('apiSetup').style.display = 'none';
            loadAllData();
        }
    </script>
</body>
</html>
